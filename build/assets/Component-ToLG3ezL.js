import{b as j,g as v,j as e,n as l,l as p,k as c,r as m,d as C,_ as b,w as N,f as S,x as k,y,ax as x,ay as B,az as w,aA as _,aB as P,B as h,aC as I,aD as A}from"./index-ih0eSx80.js";import{T as M}from"./index-EJzszR5P.js";import{S as T}from"./index-q-MDlMmR.js";import{U as F}from"./update-something-container-OFi8Bna5.js";import"./index-Oc-iVceo.js";const E=()=>{const t=j();return{shoppingMakeOrder:{data:t[0],status:t[1],fetch:({shoppingId:n},s={})=>{t[2]({method:"post",url:v({path:"/shopping/:shoppingId/makeOrder",urlParams:{shoppingId:n}})},s)},reset:t[3]}}},d=({leftButton:t,rightButton:n})=>e.jsxs("div",{className:l("flex items-center w-full mt-6",{"justify-between":t&&n,"justify-end":n&&!t,"justify-center":!t&&!n}),children:[t,n]}),R=({nextButton:t,backButton:n})=>{const{shoppingMakeOrder:s}=E(),o=p(),{business:r}=c();if(!o.constructionShopping)return e.jsx(e.Fragment,{});const a=m.cloneElement(t,{label:"Crear orden",isBusy:s.status.isBusy,onClick:()=>{if(!o.constructionShopping||!r)return;const{_id:i}=o.constructionShopping;s.fetch({shoppingId:i},{onAfterSuccess:()=>{o.onFetch({routeName:r.routeName}),t.props.onClick()}})}});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(T,{shopping:o.constructionShopping})}),e.jsx(d,{leftButton:n,rightButton:a})]})},O=C(()=>b(()=>import("./Component-jHayHYBu.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.Component}))),L=()=>{const{pushModal:t}=N();return{open:()=>{t("Emergent",{useProps:()=>{const n=S();return{title:"Información sobre la compra",badge:e.jsx(k,{variant:"cart"}),content:e.jsx(O,{portal:n}),secondaryBtn:e.jsx(y,{}),primaryBtn:e.jsx("div",{ref:n.ref})}}},{emergent:!0})}}},W=()=>{var o;const t=L(),{business:n}=c(),s=(o=n==null?void 0:n.shoppingMeta)==null?void 0:o.purchaseRequestTopInfo;return e.jsx(F,{title:"Editar infoamcion de venta",onClick:()=>t.open(),children:s?e.jsx(x,{className:"w-full",dangerouslySetInnerHTML:{__html:s}}):e.jsx("div",{className:"h-14 flex items-center justify-center bg-gray-300",children:"No hay información "})})},q=({nextButton:t})=>{const n=p();return n.lastShopping?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(W,{}),e.jsx(B,{value:n.lastShopping}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(w,{})})]}),e.jsx(d,{rightButton:t})]}):e.jsx("div",{className:"font-semibold",children:"No tiene productos en la bolsa"})},D=({backButton:t})=>{const{business:n}=c(),{lastShopping:s}=p(),o=n==null?void 0:n.whatsAppPhoneNumber;if(!o)return e.jsx(e.Fragment,{children:"No tiene contacto de Whatsapp"});if(!s)return e.jsx(e.Fragment,{children:"No tiene ninguna solicitud de compra"});const r=_(o,s);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center px-20",children:[e.jsxs(x,{className:"w-80",children:[e.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:"Click en este link"})," ","o use el código desde su teléfono para contactar con nosotros"]}),e.jsx(P,{value:r,className:"w-60 h-60 mt-2"})]}),e.jsx(d,{leftButton:t})]})},$=()=>{const[t,n]=m.useState(0),{business:s}=c(),a={backButton:e.jsx(h,{label:"Atrás",svg:I,variant:"link",onClick:()=>{t>0&&n(t-1)}}),nextButton:e.jsx(h,{label:"Siguiente",svg:A,svgPosition:"right",variant:"link",onClick:()=>{t<i.length-1&&n(t+1)}})},i=[{label:"Productos",content:e.jsx(q,{...a})},{label:"Crear orden compra",content:e.jsx(R,{...a})},(s==null?void 0:s.shoppingStrategy)==="addToCart_whatsAppWithOwner_pickUpProduct"&&{label:"Contactar con el vendedor",content:e.jsx(D,{...a})}];return e.jsx(e.Fragment,{children:e.jsx(M,{className:"justify-between",contentClassName:"w-full mt-8",onSelect:n,selected:t,itemRender:({label:g,selected:u,index:f})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:l("border-2 border-gray-400 rounded-full w-8 h-8 flex items-center justify-center",{"font-semibold !border-indigo-500":u}),children:f+1}),e.jsx("div",{className:l({"font-semibold":u}),children:g})]}),items:i})})};export{$ as Component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Component-jHayHYBu.js","assets/index-ih0eSx80.js","assets/index-l_Ec27-V.css","assets/index-TYhW_pDc.js","assets/useUpdateOneBusiness-pno-eXXt.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
