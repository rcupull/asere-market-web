import{r as N,v as F,K as M,G as R,j as e,b9 as j,n as y,k as V}from"./index-OtumRKpY.js";import{u as _}from"./useGetAllPosts-BzjapJRh.js";import{u as A}from"./index-2JOirM6f.js";import{C as B}from"./index-nenR4tzP.js";import{S as G,C as S}from"./index-C6hJHsOP.js";import{P as p,u as I}from"./index-QVyCw3xz.js";import{S as x}from"./search-filter-2tb04X1n.js";import{U as L}from"./update-something-container-QUZgfr7r.js";const O=({updateKey:c,data:o,findCB:s,changeCB:m})=>{const[t,i]=N.useState(null);return F(c,u=>{if(!t)return;const r=o==null?void 0:o.findIndex(a=>s(a,u));if(M(r)&&r>=0){const a=t[r];i([...R(t,m(a,u),r)])}}),N.useEffect(()=>{i(o)},[JSON.stringify(o)]),{data:t}},H=({business:c,posts:o,layout:s,callAfarResources:m})=>{const{routeName:t,whatsAppPhoneNumber:i}=c,{type:u}=s;return u==="oneRowSlider"?e.jsxDEV(G,{className:"!w-[90vw] !sm:w-[80vw]",slidesPerView:"auto",items:o==null?void 0:o.map((r,a)=>{const{_id:n}=r;return{content:e.jsxDEV(S,{post:r,layout:s.postCardLayout,href:j({routeName:t,postId:n}),whatsAppPhoneNumber:i,callAfarResources:m},a,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-cards/index.tsx",lineNumber:38,columnNumber:15},void 0)}})},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-cards/index.tsx",lineNumber:30,columnNumber:7},void 0):e.jsxDEV(B,{className:"mt-8",children:o==null?void 0:o.map((r,a)=>{const{_id:n}=r;return e.jsxDEV(S,{post:r,layout:s.postCardLayout,href:j({routeName:t,postId:n}),whatsAppPhoneNumber:i,callAfarResources:m},a,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-cards/index.tsx",lineNumber:59,columnNumber:11},void 0)})},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-cards/index.tsx",lineNumber:54,columnNumber:5},void 0)},J=({layout:c,className:o,filters:s,business:m})=>{const{searchLayout:t,postCategoriesTags:i}=c,{postCategories:u}=m,r=u==null?void 0:u.filter(({hidden:n,tag:f})=>!(n||i!=null&&i.length&&!i.includes(f)));if(t==="none")return e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:35,columnNumber:12},void 0);const a=n=>e.jsxDEV("div",{className:y("mt-8 w-full",o),children:n},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:39,columnNumber:12},void 0);return t==="left"?a(e.jsxDEV("div",{className:"flex justify-start",children:e.jsxDEV(x,{onChange:n=>s.onMergeFilters({search:n}),value:s.value.search},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:45,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:44,columnNumber:7},void 0)):t==="center"?a(e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV(x,{onChange:n=>s.onMergeFilters({search:n}),value:s.value.search},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:55,columnNumber:7},void 0)):t==="right"?a(e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(x,{onChange:n=>s.onMergeFilters({search:n}),value:s.value.search},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:67,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:66,columnNumber:7},void 0)):t==="postCategories"?a(e.jsxDEV(p,{postCategories:r,onChange:n=>s.onMergeFilters({postCategoriesTags:n}),value:s.value.postCategoriesTags,debounceDelay:1e3,type:"wrapped"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:77,columnNumber:7},void 0)):t==="postCategoriesScrollable"?a(e.jsxDEV(p,{postCategories:r,onChange:n=>s.onMergeFilters({postCategoriesTags:n}),value:s.value.postCategoriesTags,debounceDelay:1e3,type:"scrollable"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:89,columnNumber:7},void 0)):t==="postCategoriesExcluded"?a(e.jsxDEV(p,{postCategories:r,onChange:n=>s.onMergeFilters({postCategoriesTags:n}),value:s.value.postCategoriesTags,debounceDelay:1e3,excluding:!0,type:"wrapped"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:101,columnNumber:7},void 0)):t==="postCategoriesExcludedScrollable"?a(e.jsxDEV(p,{postCategories:r,onChange:n=>s.onMergeFilters({postCategoriesTags:n}),value:s.value.postCategoriesTags,debounceDelay:1e3,excluding:!0,type:"scrollable"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:114,columnNumber:7},void 0)):e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section-search/index.tsx",lineNumber:125,columnNumber:10},void 0)},K=({routeName:c,layout:o,className:s,index:m,visibility:t})=>{const{business:i,onFetch:u}=V(),{name:r,hiddenName:a,postCategoriesTags:n,_id:f,showIn:b}=o,{getAllPosts:w}=_(),{owner:k}=V(),v=!(b!=null&&b.includes(t)),g=v&&!k,D=v&&k,P=O({data:w.data,updateKey:"updatePostAmount",findCB:(l,{postId:d})=>l._id===d,changeCB:(l,{stockAmount:d})=>({...l,stockAmount:d})}),h=l=>{var U;const d=(U=l.postCategoriesTags)==null?void 0:U.length;w.fetch({routeNames:[c],postCategoriesTags:n,...l,postCategoriesMethod:d?"every":"some"})},C=A({onChange:l=>h(l)});N.useEffect(()=>{g||h(C.value)},[JSON.stringify(n)]);const E=`post_section_${m}_business_onRefresh`;F(E,()=>u({routeName:c}));const T=I();return g||!i?e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:82,columnNumber:12},void 0):e.jsxDEV(L,{title:"Editar este grupo de publicaciones",onClick:()=>{T.open({sectionId:f})},children:e.jsxDEV("div",{className:y("mt-10 p-4",{"bg-gray-200 rounded-md":D},s),children:[!a&&e.jsxDEV("div",{className:"flex flex-col items-center",children:[e.jsxDEV("h2",{className:"text-3xl font-bold",children:r},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:105,columnNumber:13},void 0),D&&e.jsxDEV("span",{className:"text-sm sm:text-lg ml-3 text-yellow-600",children:"(Solo visible para el administrador del negocio)"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:107,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:104,columnNumber:11},void 0),e.jsxDEV(J,{layout:o,filters:C,business:i},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:114,columnNumber:9},void 0),e.jsxDEV(H,{layout:o,posts:P.data,business:i,callAfarResources:[E]},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:94,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/components/posts-section/index.tsx",lineNumber:86,columnNumber:5},void 0)},ee=({routeName:c,layouts:o,visibility:s})=>e.jsxDEV("div",{className:"flex flex-col",children:o==null?void 0:o.map((m,t)=>e.jsxDEV(K,{index:t,routeName:c,layout:m,visibility:s},t,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/index.tsx",lineNumber:18,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/components/posts-sections-view/index.tsx",lineNumber:15,columnNumber:5},void 0);export{ee as P};
