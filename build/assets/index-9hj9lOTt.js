import{r as n,f as I,j as s,F as L,B as F,n as j,aK as R,t as w,c as B,w as M,bs as D,k as V,v as z,L as A}from"./index-ih0eSx80.js";import{F as O,a as U}from"./index-jgCKOpGx.js";import{P as Z}from"./index-1EFKHw9-.js";import{P as $}from"./index-KUT1cRl0.js";import{U as q}from"./update-something-container-OFi8Bna5.js";import"./radio-group-R5jNLVFN.js";import"./description-8TzrVJh3.js";import"./label-5zIu1i7p.js";import"./form-Ycfp73ce.js";import"./useGetAllPosts-__Z8YCdD.js";import"./index-ZCjJ8GOH.js";import"./index-Lp5J4EkY.js";import"./index-b7vcoc-g.js";import"./search-filter-cecALaN7.js";import"./index-Oc-iVceo.js";function G({title:e,titleId:t,...a},c){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const H=n.forwardRef(G),J=H;function K({title:e,titleId:t,...a},c){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z",clipRule:"evenodd"}))}const W=n.forwardRef(K),_=W,Q=({value:e,render:t,onAddToCar:a,getImageUrl:c})=>{var h,u,b,y,v,P;const r=I();if(!e)return s.jsx(s.Fragment,{});const{colors:i,currency:o,price:m,description:d,clothingSizes:x,details:l,highlights:f,reviews:g,images:p}=e;return s.jsxs("div",{className:"bg-white w-full",children:[(h=t.images)==null?void 0:h.call(t,{value:p,getImageUrl:c,className:"pt-2"}),s.jsxs("div",{className:"mx-auto max-w-2xl px-4 pb-16 pt-10 sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-8 lg:px-8 lg:pb-24 lg:pt-16",children:[s.jsx("div",{className:"lg:col-span-2 lg:border-r lg:border-gray-200 lg:pr-8",children:s.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl",children:e.name})}),s.jsxs("div",{className:"mt-4 lg:row-span-3 lg:mt-0",children:[s.jsx("h2",{className:"sr-only",children:"Product information"}),(u=t.price)==null?void 0:u.call(t,{currency:o,price:m}),g&&((b=t.review)==null?void 0:b.call(t,{value:g,className:"mt-10"})),s.jsx(L,{initialValues:{color:i==null?void 0:i[0],size:x==null?void 0:x.find(N=>N)},validate:()=>({}),onSubmit:()=>{},children:({values:N})=>{var k,S;return s.jsxs("form",{className:"mt-10",children:[!!(i!=null&&i.length)&&((k=t.colors)==null?void 0:k.call(t,{items:i,className:"mt-10",label:"Colores",name:"color"})),!!(x!=null&&x.length)&&((S=t.clothingSize)==null?void 0:S.call(t,{sizesInStock:x,className:"mt-10",label:"Tallas",name:"clothingSizes"})),r.getPortal(s.jsx(F,{label:"Add to bag",className:"mt-10 w-full",onClick:()=>{const{color:C,size:E}=N;a==null||a({color:C,size:E})}}))]})}}),s.jsx("div",{ref:r.ref})]}),s.jsxs("div",{className:"py-10 lg:col-span-2 lg:col-start-1 lg:border-r lg:border-gray-200 lg:pb-16 lg:pr-8 lg:pt-6",children:[d&&((y=t.description)==null?void 0:y.call(t,{value:d})),f&&((v=t.highLights)==null?void 0:v.call(t,{value:f,className:"mt-10",title:"Características"})),l&&((P=t.details)==null?void 0:P.call(t,{value:l,className:"mt-10",title:"Detalles"}))]})]})]})},X=({value:e,className:t})=>s.jsxs("div",{className:t,children:[s.jsx("h3",{className:"sr-only",children:"Description"}),s.jsx("div",{className:"space-y-6",children:s.jsx("p",{className:"text-base text-gray-900",children:e})})]}),Y=({title:e,value:t,className:a})=>s.jsxs("div",{className:a,children:[s.jsx("h2",{className:"text-sm font-medium text-gray-900",children:e}),s.jsx("div",{className:"mt-4 space-y-6",children:s.jsx("p",{className:"text-sm text-gray-600",children:t})})]}),T=({title:e,value:t,className:a})=>s.jsxs("div",{className:a,children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e}),s.jsx("div",{className:"mt-4",children:s.jsx("ul",{role:"list",className:"list-disc space-y-2 pl-4 text-sm",children:t==null?void 0:t.map(c=>s.jsx("li",{className:"text-gray-400",children:s.jsx("span",{className:"text-gray-600",children:c})},c))})})]}),ss=({className:e})=>s.jsx("div",{className:j("flex items-center justify-center h-64 w-64",e),children:s.jsx(J,{className:"h-32 w-32 text-gray-400"})}),ts=({value:e,className:t})=>{const[a,c]=n.useState();return n.useEffect(()=>{e!=null&&e.length&&c(e[0])},[e]),s.jsxs("div",{className:j("flex flex-col-reverse sm:flex-row justify-center gap-2 w-full min-h-[20rem] lg:min-h-[30rem]",t),children:[s.jsx("div",{className:"flex flex-row sm:flex-col gap-2 overflow-auto flex-shrink-0",children:e==null?void 0:e.map((r,i)=>{const{src:o,alt:m}=r,d=R(r,a);return s.jsx("img",{onClick:()=>c(r),src:w(o),alt:m,className:j("h-20 w-20 object-cover object-center cursor-pointer",{"border-2 border-gray-400 rounded-sm":d})},i)})}),s.jsx("div",{className:"flex-1 flex items-center justify-center border-2 border-gray-200 rounded-md",children:a?s.jsx("img",{src:w(a.src),alt:a.alt,className:"object-cover object-center"}):s.jsx(ss,{className:"border-2 rounded-lg"})})]})},es=({currency:e,price:t})=>s.jsxs("div",{className:"text-3xl tracking-tight text-gray-900",children:[t,s.jsx("span",{className:"text-lg ml-2",children:e})]}),as=({value:e,onClickToReview:t,className:a})=>{const{average:c,totalCount:r}=n.useMemo(()=>{let i=0,o=0;return e==null||e.forEach((m,d)=>{i=i+m,o=o+(d+1)*m}),{totalCount:i,average:o/i}},[JSON.stringify(e)]);return e?s.jsxs("div",{className:a,children:[s.jsx("h3",{className:"sr-only",children:"Reviews"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex items-center",children:[0,1,2,3,4].map(i=>s.jsx(_,{className:j(c>i?"text-gray-900":"text-gray-200","h-5 w-5 flex-shrink-0"),"aria-hidden":"true"},i))}),s.jsxs("p",{className:"sr-only",children:[c," out of 5 stars"]}),s.jsxs("a",{onClick:t,className:"ml-3 text-sm font-medium text-indigo-600 hover:text-indigo-500",children:[r,` ${r===1?"voto":"votos"}`]})]})]}):s.jsx(s.Fragment,{})},Ns=({routeName:e})=>{var x;const{params:t}=B(),{postId:a}=t,{pushModal:c}=M(),r=D(),i=V();z(a,()=>{a&&r.fetch({id:a})}),n.useEffect(()=>{if(a)return r.fetch({id:a}),()=>{r.reset()}},[a]);const o=r.data,m=i.business;if(!o||!m)return s.jsx(s.Fragment,{});const d=()=>{var g,p,h;const l=(g=o.postPageLayout)==null?void 0:g.postsSectionsBelowIds;return(((h=(p=m==null?void 0:m.layouts)==null?void 0:p.posts)==null?void 0:h.sections)||[]).filter(({_id:u})=>l==null?void 0:l.includes(u))};return s.jsx(q,{title:"Editar esta publicación",onClick:()=>c("PostNew",{postId:o._id,callAfarResources:a}),children:s.jsxs(A,{title:s.jsxs("div",{className:"flex items-center",children:[o==null?void 0:o.name,s.jsx(Z,{post:o,layout:(x=o.postPageLayout)==null?void 0:x.shoppingMethod,whatsAppPhoneNumber:m.whatsAppPhoneNumber,className:"ml-auto"})]}),backButton:!0,children:[s.jsx(Q,{onAddToCar:l=>{console.log("value",l)},getImageUrl:w,value:o,render:{images:l=>s.jsx(ts,{...l}),price:l=>s.jsx(es,{...l}),review:l=>s.jsx(as,{...l}),colors:l=>s.jsx(O,{...l}),clothingSize:l=>s.jsx(U,{...l}),description:l=>s.jsx(X,{...l}),highLights:l=>s.jsx(T,{...l}),details:l=>s.jsx(Y,{...l})}}),s.jsx($,{routeName:e,layouts:d(),visibility:"postPage"})]})})};export{Ns as PostId};
