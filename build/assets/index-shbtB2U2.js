import{r as j,z as ge,b as ve,g as pe,j as b,p as be,w as ye,A as xe,D as we,x as ke,B as Se,y as Ne,G as Ce,S as je}from"./index-OtumRKpY.js";import{M as Re}from"./index-ftY_1bKV.js";import{S as Ee}from"./search-filter-2tb04X1n.js";import"./description-xrSyH_28.js";var Y={exports:{}};(function(p,N){(function(y,h){h(N,j)})(ge,function(y,h){function w(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var W=w(h),l=function(){return l=Object.assign||function(e){for(var r,a=1,o=arguments.length;a<o;a++){r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)};function _(t,e,r){if(r||arguments.length===2)for(var a=0,o=e.length,n;a<o;a++)(n||!(a in e))&&(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var B={exports:{}},R={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L;function A(){if(L)return R;L=1;var t=W.default,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function u(s,i,m){var d,g={},v=null,x=null;m!==void 0&&(v=""+m),i.key!==void 0&&(v=""+i.key),i.ref!==void 0&&(x=i.ref);for(d in i)a.call(i,d)&&!n.hasOwnProperty(d)&&(g[d]=i[d]);if(s&&s.defaultProps)for(d in i=s.defaultProps,i)g[d]===void 0&&(g[d]=i[d]);return{$$typeof:e,type:s,key:v,ref:x,props:g,_owner:o.current}}return R.Fragment=r,R.jsx=u,R.jsxs=u,R}B.exports=A();var c=B.exports,M=function(t,e,r){return typeof t=="function"?t(r):typeof t=="object"?t:e(r)},z={3:"rotate(180deg)",2:"rotateY(180deg)",4:"rotate(180deg) rotateY(180deg)",5:"rotate(270deg) rotateY(180deg)",6:"rotate(90deg)",7:"rotate(90deg) rotateY(180deg)",8:"rotate(270deg)"},E=16,f={display:"flex",flexWrap:"wrap"},C=function(t){var e=t.item,r=z[e.orientation],a={cursor:"pointer",maxWidth:"none",width:e.scaledWidth,height:e.scaledHeight,marginLeft:e.marginLeft,marginTop:0,transform:r};if(e.isSelected){var o=e.scaledWidth/e.scaledHeight,n=e.scaledHeight-E*2,u=e.viewportWidth-E*2,s=void 0,i=void 0;e.scaledWidth>e.scaledHeight?(i=e.scaledWidth-E*2,s=Math.floor(i/o)):(s=e.scaledHeight-E*2,i=Math.floor(s*o));var m=Math.abs(Math.floor((n-s)/2)),d=Math.abs(Math.floor((u-i)/2));a.width=i,a.height=s,a.marginLeft=d===0?0:-d,a.marginTop=m===0?0:-m}return a},O=function(t){var e=t.item,r={width:e.viewportWidth,height:e.scaledHeight,overflow:"hidden"};return e.nano&&(r.background="url(".concat(e.nano,")"),r.backgroundSize="cover",r.backgroundPosition="center center"),e.isSelected&&(r.width=e.viewportWidth-E*2,r.height=e.scaledHeight-E*2,r.margin=E),r},G=function(t){var e=t.hover;return{pointerEvents:"none",opacity:e?1:0,position:"absolute",height:"100%",width:"100%"}},q=function(t){var e=t.margin;return{margin:e,WebkitUserSelect:"none",position:"relative",background:"#eee",padding:"0px"}},$=function(t){var e=t.showOverlay;return{pointerEvents:"none",opacity:1,position:"absolute",height:"100%",width:"100%",background:e?"linear-gradient(to bottom,rgba(0,0,0,0.26),transparent 56px,transparent)":"none"}},ee={pointerEvents:"none",opacity:1,position:"absolute",height:"36px",width:"100%"},te={background:"white",width:"100%",margin:0,userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",overflow:"hidden"},re={padding:"2px",pointerEvents:"none",position:"absolute",minHeight:"0px",maxHeight:"160px",width:"100%",bottom:"0px",overflow:"hidden"},ae={display:"inline-block",cursor:"pointer",pointerEvents:"visible",margin:"2px"},ne=function(){return{display:"inline",padding:".2em .6em .3em",fontSize:"75%",fontWeight:"600",lineHeight:"1",color:"yellow",background:"rgba(0,0,0,0.65)",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"baseline",borderRadius:".25em"}},ie=function(t){var e=t.isVisible;return{visibility:e?"visible":"hidden",background:"none",float:"left",width:36,height:36,border:"none",padding:6,cursor:"pointer",pointerEvents:"visible"}},J=function(t){var e=t.isSelected,r=e===void 0?!1:e,a=t.isVisible,o=a===void 0?!0:a,n=t.onClick,u=t.color,s=u===void 0?"#FFFFFFB2":u,i=t.selectedColor,m=i===void 0?"#4285F4FF":i,d=t.hoverColor,g=d===void 0?"#FFFFFFFF":d,v=h.useState(!1),x=v[0],k=v[1],S={display:r?"block":"none"},F=r?m:x?g:s,H=function(){return k(!0)},U=function(){return k(!1)};return c.jsx("div",l({"data-testid":"grid-gallery-item_check-button",title:"Select",style:ie({isVisible:o}),onClick:n,onMouseOver:H,onMouseOut:U},{children:c.jsxs("svg",l({fill:F,height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},{children:[c.jsxs("radialGradient",l({id:"shadow",cx:"38",cy:"95.488",r:"10.488",gradientTransform:"matrix(1 0 0 -1 -26 109)",gradientUnits:"userSpaceOnUse"},{children:[c.jsx("stop",{offset:".832",stopColor:"#010101"}),c.jsx("stop",{offset:"1",stopColor:"#010101",stopOpacity:"0"})]})),c.jsx("circle",{style:S,opacity:".26",fill:"url(#shadow)",cx:"12",cy:"13.512",r:"10.488"}),c.jsx("circle",{style:S,fill:"#FFF",cx:"12",cy:"12.2",r:"8.292"}),c.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})]}))}))},oe=function(t){var e=t.item,r=t.thumbnailImageComponent,a=t.isSelectable,o=a===void 0?!0:a,n=t.thumbnailStyle,u=t.tagStyle,s=t.tileViewportStyle,i=t.margin,m=t.index,d=t.onSelect,g=t.onClick,v={item:e},x=h.useState(!1),k=x[0],S=x[1],F={key:m,"data-testid":"grid-gallery-item_thumbnail",src:e.src,alt:e.alt?e.alt:"",title:typeof e.caption=="string"?e.caption:null,style:M(n,C,v)},H=function(D){o&&d(m,D)},U=function(D){g(m,D)},P={item:e,index:m,margin:i,onSelect:d,onClick:g,isSelectable:o,tileViewportStyle:s,thumbnailStyle:n,tagStyle:u};return c.jsxs("div",l({className:"ReactGridGallery_tile","data-testid":"grid-gallery-item",onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},style:q({margin:i})},{children:[c.jsx("div",l({className:"ReactGridGallery_tile-icon-bar",style:ee},{children:c.jsx(J,{isSelected:e.isSelected,isVisible:e.isSelected||o&&k,onClick:H})})),!!e.tags&&c.jsx("div",l({className:"ReactGridGallery_tile-bottom-bar",style:re},{children:e.tags.map(function(D,T){return c.jsx("div",l({title:D.title,style:ae},{children:c.jsx("span",l({style:M(u,ne,v)},{children:D.value}))}),D.key||T)})})),!!e.customOverlay&&c.jsx("div",l({className:"ReactGridGallery_custom-overlay",style:G({hover:k})},{children:e.customOverlay})),c.jsx("div",{className:"ReactGridGallery_tile-overlay",style:$({showOverlay:k&&!e.isSelected&&o})}),c.jsx("div",l({className:"ReactGridGallery_tile-viewport","data-testid":"grid-gallery-item_viewport",style:M(s,O,v),onClick:U},{children:r?c.jsx(r,l({},P,{imageProps:F})):c.jsx("img",l({},F))})),e.thumbnailCaption&&c.jsx("div",l({className:"ReactGridGallery_tile-description",style:te},{children:e.thumbnailCaption}))]}))};function se(t){var e=h.useRef(null),r=h.useRef(),a=h.useState(t),o=a[0],n=a[1],u=h.useCallback(function(s){var i;(i=r.current)===null||i===void 0||i.disconnect(),r.current=void 0,e.current=s;var m=function(){if(e.current){var d=e.current.clientWidth;try{d=e.current.getBoundingClientRect().width}catch{}n(Math.floor(d))}};m(),s&&typeof ResizeObserver<"u"&&(r.current=new ResizeObserver(m),r.current.observe(s))},[]);return{containerRef:u,containerWidth:o}}var le=function(t,e,r){var a=[],o=0;for(var n in t){var u=t[n],s=u.scaledWidth/e;a[n]=Math.floor(s*r),o+=a[n]}for(var i=r-o;i>0;)for(var n in a)if(a[n]++,i--,i<0)break;return a},ce=function(t,e){for(var r=e.containerWidth,a=e.rowHeight,o=e.margin,n=[],u=2*o,s=_([],t,!0),i=0;s.length>0&&i<r;){var m=s.shift(),d=Math.floor(a*(m.width/m.height)),g=l(l({},m),{scaledHeight:a,scaledWidth:d,viewportWidth:d,marginLeft:0});n.push(g),i+=g.scaledWidth+u}var v=i-r;if(n.length>0&&v>0){var x=le(n,i,v);for(var k in n){var S=x[k],m=n[k];m.marginLeft=-Math.abs(Math.floor(S/2)),m.viewportWidth=m.scaledWidth-S}}return[n,s]},K=function(t,e,r){r===void 0&&(r=[]);var a=ce(t,e),o=a[0],n=a[1],u=_(_([],r,!0),[o],!1);return e.maxRows&&u.length>=e.maxRows?u:n.length?K(n,e,u):u},Q=function(t,e){var r=e.containerWidth,a=e.maxRows,o=e.rowHeight,n=e.margin;if(o=typeof o>"u"?180:o,n=typeof n>"u"?2:n,!t)return[];if(!r)return[];var u={containerWidth:r,maxRows:a,rowHeight:o,margin:n};return K(t,u)},X=function(t,e){var r=Q(t,e);return[].concat.apply([],r)},Z=function(t){var e=t.images,r=t.id,a=r===void 0?"ReactGridGallery":r,o=t.enableImageSelection,n=o===void 0?!0:o,u=t.onSelect,s=u===void 0?function(){}:u,i=t.rowHeight,m=i===void 0?180:i,d=t.maxRows,g=t.margin,v=g===void 0?2:g,x=t.defaultContainerWidth,k=x===void 0?0:x,S=t.onClick,F=S===void 0?function(){}:S,H=t.tileViewportStyle,U=t.thumbnailStyle,P=t.tagStyle,D=t.thumbnailImageComponent,T=se(k),ue=T.containerRef,me=T.containerWidth,de=X(e,{containerWidth:me,maxRows:d,rowHeight:m,margin:v}),fe=function(I,V){V.preventDefault(),s(I,e[I],V)},he=function(I,V){F(I,e[I],V)};return c.jsx("div",l({id:a,className:"ReactGridGallery",ref:ue},{children:c.jsx("div",l({style:f},{children:de.map(function(I,V){return c.jsx(oe,{item:I,index:V,margin:v,height:m,isSelectable:n,onClick:he,onSelect:fe,tagStyle:P,tileViewportStyle:H,thumbnailStyle:U,thumbnailImageComponent:D},I.key||V)})}))}))};Z.displayName="Gallery",y.CheckButton=J,y.Gallery=Z,y.buildLayout=Q,y.buildLayoutFlat=X,Object.defineProperty(y,"__esModule",{value:!0})})})(Y,Y.exports);var De=Y.exports;const Ie=()=>{const p=ve();return{getCatalogsImages:{data:p[0],status:p[1],fetch:({search:N},y={})=>{p[2]({method:"get",url:pe({path:"/catalogs/images",query:{search:N}})},y)},reset:p[3]}}},We=p=>{const[N,y]=j.useState(!1),h=j.useMemo(()=>new IntersectionObserver(([w])=>y(w.isIntersecting)),[p]);return j.useEffect(()=>(h.observe(p.current),()=>h.disconnect()),[]),N},_e=({imageProps:p})=>{const{style:N}=p,[y,h]=j.useState(!1),w=j.useRef(null),W=We(w);return j.useEffect(()=>{W&&h(!0)},[W]),y?b.jsxDEV("img",{...p},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/ThumbnailImageComponent.tsx",lineNumber:24,columnNumber:12},void 0):b.jsxDEV("div",{ref:w,style:{...N},className:"flex items-center justify-center",children:b.jsxDEV(be,{className:"h-12 w-12"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/ThumbnailImageComponent.tsx",lineNumber:29,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/ThumbnailImageComponent.tsx",lineNumber:28,columnNumber:5},void 0)},Fe=({onSelected:p,multi:N})=>{const{onClose:y}=ye(),{getCatalogsImages:h}=Ie(),{data:w,setData:W}=xe("modal_catalogsSearchImage"),[l,_]=j.useState([]),[B,R]=j.useState();j.useEffect(()=>{w&&(R(w.search),_(w.result.map(({height:f,url:C,width:O,title:G})=>({height:f,width:O,src:C,alt:G}))))},[w]);const L=we(),A=()=>{const f=l.filter(({isSelected:C})=>C);f.length&&(p==null||p(f.map(({src:C,height:O,width:G})=>({src:C,height:O,width:G})))),y()},c=f=>{const C=l[f];_(N?Ce(l,{...C,isSelected:!C.isSelected},f):l.map((O,G)=>({...O,isSelected:G===f})))},M=f=>b.jsxDEV("div",{className:"flex items-center justify-center w-full h-full border-gray-300 rounded-md border-2 border-dashed text-gray-400",children:f},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:84,columnNumber:7},void 0),z=()=>h.status.isBusy?M(b.jsxDEV(je,{},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:92,columnNumber:42},void 0)):l.length?b.jsxDEV(De.Gallery,{images:l,onClick:f=>c(f),thumbnailImageComponent:_e},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:100,columnNumber:7},void 0):M(b.jsxDEV("span",{children:"No hay imágenes para mostrar"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:96,columnNumber:42},void 0)),E=b.jsxDEV("div",{children:[b.jsxDEV(Ee,{value:B,onChange:f=>{R(f),f?L(()=>{h.fetch({search:f},{onAfterSuccess:W})},500):W(null),R(f)}},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:110,columnNumber:7},void 0),b.jsxDEV("p",{className:"mt-3 text-gray-400",children:`(${N?"Seleccione una o varias imágenes":"Seleccione una imagen"})`},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:131,columnNumber:7},void 0),b.jsxDEV("div",{className:"h-[calc(100vh-18rem)] overflow-y-auto",children:z()},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:134,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:109,columnNumber:5},void 0);return b.jsxDEV(Re,{title:"Catálogos de imágenes",content:E,badge:b.jsxDEV(ke,{variant:"info"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:142,columnNumber:14},void 0),primaryBtn:b.jsxDEV(Se,{label:"Seleccionar",onClick:A},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:143,columnNumber:19},void 0),secondaryBtn:b.jsxDEV(Ne,{},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:144,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/catalogs-search-image/index.tsx",lineNumber:139,columnNumber:5},void 0)};export{Fe as CatalogsSearchImage};
