import{r as u,j as e,n as y,C as j,w as V,v as B,s as U,T as C,D as F,f as O,h as A,F as R,U as i,i as M,q as l,B as S,x as G,y as P}from"./index-OtumRKpY.js";import{F as q}from"./index-HEeqd90A.js";import{M as I}from"./index-ftY_1bKV.js";import{u as L}from"./useAddOneBusiness-q72QpMCq.js";import{u as T}from"./useUpdateOneBusiness-b6-hFlS_.js";import"./form-gCruAkS1.js";import"./CheckIcon-5k25d-5i.js";import"./description-xrSyH_28.js";function X({title:a,titleId:r,...n},o){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),a?u.createElement("title",{id:r},a):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const z=u.forwardRef(X),W=z,Z=({routeName:a,error:r,className:n})=>{const o=r?e.jsxDEV(W,{className:"text-red-500 w-5 h-5"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/pages/@common/form-route-name.tsx",lineNumber:13,columnNumber:5},void 0):e.jsxDEV(j,{className:"text-green-500 w-5 h-5"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/pages/@common/form-route-name.tsx",lineNumber:15,columnNumber:5},void 0);return e.jsxDEV("div",{className:n,children:a&&e.jsxDEV("div",{className:"flex items-center",children:[o,e.jsxDEV("span",{className:"text-sm ml-1",children:"Ruta de la página:"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/pages/@common/form-route-name.tsx",lineNumber:24,columnNumber:11},void 0),e.jsxDEV("span",{className:y("text-sm ml-1",{"text-red-500":r,"text-green-500":!r}),children:a},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/pages/@common/form-route-name.tsx",lineNumber:25,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/pages/@common/form-route-name.tsx",lineNumber:21,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/pages/@common/form-route-name.tsx",lineNumber:19,columnNumber:5},void 0)},se=({callAfarResources:a,routeName:r})=>{const{onClose:n}=V(),{onCallAfar:o}=B(),{getAllBusiness:p}=U(),{addOneBusiness:N}=L(),{updateOneBusiness:g}=T(),{getOneBusiness:x}=C(),t=x.data;u.useEffect(()=>{r&&x.fetch({routeName:r})},[]);const D=F(),w=O(),v=A(),k="Ese nombre de negocio ya existe.",E=e.jsxDEV(R,{initialValues:{category:"",name:"",...t||{}},enableReinitialize:!0,validate:d=>v(d,[{field:"category",type:"required"},{field:"name",type:"required"},{field:"name",type:"custom",message:k,customCb:async m=>{const f=i(m);return new Promise(s=>{D(()=>{p.fetch({routeNames:[f]},{onAfterSuccess:c=>{const{data:b}=c,h=!!b.length;s(!h)}})},500)})}}]),onSubmit:()=>{},children:({errors:d,values:m,isValid:f})=>e.jsxDEV("form",{children:[e.jsxDEV(M,{id:"business-name",name:"name",autoComplete:"business-name",label:"Nombre del negocio"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:106,columnNumber:13},void 0),e.jsxDEV(Z,{routeName:i(m.name),error:k===d.name,className:"mt-3"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:113,columnNumber:13},void 0),!t&&e.jsxDEV(q,{items:[{category:"food",label:l("food")},{category:"clothing",label:l("clothing")},{category:"service",label:l("service")},{category:"tool",label:l("tool")}],renderOption:({label:s})=>s,renderValue:({label:s})=>s,optionToValue:({category:s})=>s,name:"category",label:"Categoría",className:"mt-6"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:120,columnNumber:15},void 0),w.getPortal(e.jsxDEV(S,{label:"Guardar",isBusy:N.status.isBusy,disabled:!f,onClick:()=>{if(t){const{name:s}=m;g.fetch({routeName:t.routeName,update:{name:s,routeName:i(s)}},{onAfterSuccess:()=>{n(),o(a,{...t,name:s,routeName:i(s)})}})}else{const{category:s,name:c}=m;N.fetch({category:s,name:c,routeName:i(c)},{onAfterSuccess:b=>{n(),o(a,b)}})}},variant:"primary",className:"w-full"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:149,columnNumber:15},void 0))]},void 0,!0,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:105,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:60,columnNumber:5},void 0);return e.jsxDEV(I,{title:t?"Editar negocio":"Crear negocio",content:E,badge:e.jsxDEV(G,{variant:"info"},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:209,columnNumber:14},void 0),primaryBtn:e.jsxDEV("div",{ref:w.ref},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:210,columnNumber:19},void 0),secondaryBtn:e.jsxDEV(P,{},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:211,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/mac/Documents/work/asere-market/asere-market-web/src/features/modal/components/business-new/index.tsx",lineNumber:206,columnNumber:5},void 0)};export{se as BusinessNew};
